<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Traballo Fin de Máster - 2.6 Resultado</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./conclusions.html" rel="next">
<link href="./MandT.html" rel="prev">
<link href="./../icologo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sen resultados",
    "search-matching-documents-text": "documentos coincidentes",
    "search-copy-link-title": "Copiar ligazón para buscar",
    "search-hide-matches-text": "Ocultar coincidencias adicionais",
    "search-more-match-text": "máis coincidencias neste documento",
    "search-more-matches-text": "máis coincidencias neste documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner {
        background: #D60D8C;
      }
</style>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../my_style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Cambiar navegación da barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./body.html">2 Desenvolvemento do traballo</a></li><li class="breadcrumb-item"><a href="./Results.html">2.6 Resultado</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Cambiar navegación da barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./body.html">2 Desenvolvemento do traballo</a></li><li class="breadcrumb-item"><a href="./Results.html">2.6 Resultado</a></li></ol></nav>
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">2.6 Resultado</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Traballo Fin de Máster</a> 
        <div class="sidebar-tools-main tools-wide">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-translate"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./../index.html">
            Español
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./../en/index.html">
            English
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-pdf"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./../pdf/Traballo Fin de Mestrado.pdf">
            Galego
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./../pdf/Master's Final Thesis.pdf">
            English
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./../pdf/Trabajo Final de Máster.pdf">
            Español
            </a>
          </li>
      </ul>
    </div>
    <a href="https://github.com/davidrsch/TFM" title="Código fonte" class="quarto-navigation-tool px-1" aria-label="Código fonte"><i class="bi bi-github"></i></a>
    <a href="https://twitter.com/intent/tweet?url=|url|" title="Twitter" class="quarto-navigation-tool px-1" aria-label="Twitter"><i class="bi bi-twitter"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Descrición</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./greetings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Grazas</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summarygal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumo</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summaryes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resumen</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summaryen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abstract</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 Introdución</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./body.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2 Desenvolvemento do traballo</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./FSandP.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.1 Caracterización de series temporais financeiras</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ANNinTSF.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.2 Redes neuronais artificiais na previsión de series temporais</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./PC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.3 Composición de carteiras</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.4 Datos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MandT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2.5 Modelado e formación</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Results.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2.6 Resultado</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 Conclusións</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliografía</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Anexos</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annex1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo. 1 Figuras</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annex2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo. 2 Gráficos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annex3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo. 3 Taboleiros</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Annex4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anexo. 4 Códigos</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Táboa de contidos</h2>
   
  <ul>
  <li><a href="#sec-predicciones" id="toc-sec-predicciones" class="nav-link active" data-scroll-target="#sec-predicciones">2.6.1 Predicións</a>
  <ul class="collapse">
  <li><a href="#unha-observación" id="toc-unha-observación" class="nav-link" data-scroll-target="#unha-observación">2.6.1.1 Unha observación</a></li>
  <li><a href="#dúas-observacións" id="toc-dúas-observacións" class="nav-link" data-scroll-target="#dúas-observacións">2.6.1.2 Dúas observacións</a></li>
  <li><a href="#tres-observacións" id="toc-tres-observacións" class="nav-link" data-scroll-target="#tres-observacións">2.6.1.3 Tres observacións</a></li>
  </ul></li>
  <li><a href="#sec-cc" id="toc-sec-cc" class="nav-link" data-scroll-target="#sec-cc">2.6.2 Composición de carteiras</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/davidrsch/TFM/edit/master/gale/Results.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta páxina</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Este epígrafe divídese en dous subtítulos nos que se describen brevemente os resultados obtidos. No primeiro dos subtítulos descríbense e analízanse as predicións. O segundo subtítulo presenta os resultados da aplicación da programación cuadrática para a composición da carteira en función das predicións obtidas.</p>
<section id="sec-predicciones" class="level2">
<h2 class="anchored" data-anchor-id="sec-predicciones">2.6.1 Predicións</h2>
<p>En Anexo 4 - <a href="./Annex4.html#sec-A-predicciones">Predicións</a> pódese atopar unha explicación máis detallada do código utilizado durante o procedemento descrito nesta subsección.</p>
<p>Como se explicou anteriormente, mentres se adestraba o modelo, obtivéronse as predicións. Como se fixo cos modelos de redes neuronais artificiais, as predicións calculáronse para as diferentes observacións utilizando a media aritmética das observacións. Utilizouse a media aritmética porque é unha das medidas máis utilizadas como indicador de posibles comportamentos futuros no estudo das series temporais financeiras.</p>
<p>As predicións avaliaranse calculando o <span class="math inline">\(MSE\)</span> e os valores reais e os <span class="math inline">\(R^2\)</span> dos resultados obtidos polos modelos de redes neuronais artificiais e as medias aritméticas.</p>
<p>Segundo explica <span class="citation" data-cites="Glen23">Glen (<a href="references.html#ref-Glen23" role="doc-biblioref">2023</a>)</span>, o <span class="math inline">\(MSE\)</span> indíca o preto que está unha recta de regresión dun conxunto de puntos. Faino tomando as distancias dos puntos á recta de regresión (estas distancias son os “erros”) e elevándoas ao cadrado. O cadrado é necesario para eliminar calquera signo negativo. Tamén dá máis peso ás diferenzas maiores. Chámase erro cadrado medio xa que estás atopando a media dun conxunto de erros. Canto menor sexa o <span class="math inline">\(MSE\)</span>, mellor será a previsión, mostrada por <a href="#eq-mse" class="quarto-xref">Ecuación&nbsp;<span>1</span></a> tal e como se calculou.</p>
<p><span id="eq-mse"><span class="math display">\[
\begin{aligned}
MSE &amp;= \frac{1}{n} * \sum_{i=1}^{n}{(Y_i-\hat{Y_i})^2} \\
\end{aligned}
\tag{1}\]</span></span></p>
<p>Onde:</p>
<div class="margin">
<p><span class="math inline">\(n\)</span>: número de observacións</p>
</div>
<div class="margin">
<p><span class="math inline">\(Y_i\)</span>: valor real</p>
</div>
<div class="margin">
<p><span class="math inline">\(\hat{Y_i}\)</span>: valor esperado</p>
</div>
<p>Como explica <span class="citation" data-cites="Nandakumar20">Nandakumar (<a href="references.html#ref-Nandakumar20" role="doc-biblioref">2020</a>)</span> <span class="math inline">\(R^2\)</span> úsase habitualmente para explicar o bo rendemento dun modelo en comparación coa media global das observacións, <a href="#eq-r2" class="quarto-xref">Ecuación&nbsp;<span>2</span></a>:</p>
<p><span id="eq-r2"><span class="math display">\[
\begin{aligned}
R^2 &amp;= 1-\frac{SSR}{SST}\\
R^2 &amp;= 1-\frac{\sum_{i=1}^{n}{(Y_i-\hat{Y_i})^2}}{\sum_{i=1}^{n}{(Y_i-\tilde{Y})^2}}\\
\end{aligned}
\tag{2}\]</span></span></p>
<p>Onde:</p>
<div class="margin">
<p><span class="math inline">\(\tilde{Y}\)</span>: media aritmética de todas as observacións</p>
</div>
<p>Pero este pode ser un indicador inxusto do rendemento dun modelo de regresión xa que se supón que se coñecen todas as observacións sobre as que se calcula unha media, e como se mencionou anteriormente, este non é o caso dos modelos de redes neuronais. metodoloxía de validación avanzada. Debido a isto, modificouse o cálculo de <span class="math inline">\(R^2\)</span>, como se fixo noutras investigacións como <span class="citation" data-cites="NBERw25398">Gu, Kelly, and Xiu (<a href="references.html#ref-NBERw25398" role="doc-biblioref">2018</a>)</span>, de xeito que o modelo co que se comparan os resultados obtidos polas ANN utilizadas é o que comprenden as medias aritméticas das observacións anteriores á prevista.</p>
<p>A continuación, describiranse brevemente os diferentes resultados obtidos polos distintos modelos construídos. Cómpre sinalar que, aínda que se propuxeron 3 modelos diferentes de cada un deles, construíronse 10, co obxectivo de estandarizar os resultados obtidos, xa que o proceso de construción e adestramento de redes neuronais contén un factor aleatorio. Polo tanto, os resultados que se describen a continuación son os resultados medios obtidos polos distintos modelos construídos.</p>
<section id="unha-observación" class="level3">
<h3 class="anchored" data-anchor-id="unha-observación">2.6.1.1 Unha observación</h3>
<p>Os resultados obtidos por aqueles modelos que foron adestrados con vectores de entrada que tiñan unha observación de cada serie mostraron, como se ve en <a href="Annex2.html#fig-ind_evo_oo" class="quarto-xref">Figura&nbsp;<span>8</span></a>, que nos primeiros períodos os modelos presentaban mellores predicións que as obtidas pola media aritmética. Pódese observar que a eficacia dos modelos en comparación coas medias decae a medida que o modelo avanza no tempo e aprende das novas observacións. Tamén se ve claramente que na maioría dos períodos o <span class="math inline">\(R^2\)</span> deste modelo é negativo. Ademais, obsérvase un pico no <span class="math inline">\(MSE\)</span> do modelo a principios de 2020, que se entende como unha perda de efectividade do modelo, esta perda de efectividade do modelo podería estar relacionada con movementos bruscos do mercado derivados dos efectos económicos do Covid-19.</p>
<p>A análise previa do comportamento dos indicadores destes modelos por períodos ofrécenos unha visión xeral do desempeño destes modelos, pero dado que os resultados obtidos nas empresas son fundamentais para a composición da carteira, analizaremos agora o comportamento observado nos resultados obtidos polas 20 empresas que presentaron os mellores e peores resultados, a partir dos <span class="math inline">\(R^2\)</span> obtidos como criterio.</p>
<p>Observando os resultados dos indicadores expostos na <a href="Annex3.html#tbl-indicadores" class="quarto-xref">Táboa&nbsp;<span>4</span></a>, aquelas empresas que presentaron un peor <span class="math inline">\(R^2\)</span> presentan tamén un baixo <span class="math inline">\(MSE\)</span>, o que indica que é menos probable que a composición da carteira se vexa alterada polos resultados obtidos por estas empresas. Por outra banda, entre as empresas que obtiveron un mellor <span class="math inline">\(R^2\)</span> hai algunhas que obtiveron un <span class="math inline">\(MSE\)</span> elevado acompañado dun <span class="math inline">\(R^2\)</span> superior ao 5%. Isto indica que se poderían xerar diferenzas entre as composicións das carteiras debido ás diferenzas nas previsións e que se trata de empresas que non teñen un boa <span class="math inline">\(MSE\)</span>.</p>
<p>Os resultados descritos no parágrafo anterior son similares para os casos dos modelos construídos con dúas e tres observacións, respectivamente.</p>
</section>
<section id="dúas-observacións" class="level3">
<h3 class="anchored" data-anchor-id="dúas-observacións">2.6.1.2 Dúas observacións</h3>
<p>Os resultados obtidos por aqueles modelos que foron adestrados con vectores de entrada que tiñan dúas observacións de cada serie, comprobouse, como se ve en <a href="Annex2.html#fig-ind_evo_twoo" class="quarto-xref">Figura&nbsp;<span>9</span></a>, que nos primeiros períodos os modelos presentaban mellores predicións que as obtidas pola media. Pódese ver que a eficacia dos modelos en comparación coas medias decae a medida que o modelo avanza no tempo, pero decaen a un ritmo máis lento que aqueles modelos adestrados con vectores de entrada con unha observación. Tamén se ve claramente que o <span class="math inline">\(R^2\)</span> destes modelos ten menos variación que o <span class="math inline">\(R^2\)</span> dos modelos analizados anteriormente, xa que para estes modelos o <span class="math inline">\(R^2\)</span> é positivo na maioría dos períodos. Ademais, como no caso dos modelos analizados anteriormente, tamén se observa un pico no <span class="math inline">\(MSE\)</span> do modelo a principios de 2020.</p>
</section>
<section id="tres-observacións" class="level3">
<h3 class="anchored" data-anchor-id="tres-observacións">2.6.1.3 Tres observacións</h3>
<p>Os resultados obtidos por aqueles modelos que foron adestrados con vectores de entrada que tiñan tres observacións de cada serie, comprobouse, como se ve en <a href="Annex2.html#fig-ind_evo_threeo" class="quarto-xref">Figura&nbsp;<span>10</span></a>, que nos primeiros períodos os modelos presentaban mellores predicións que as obtidas pola media. Pódese ver que a eficacia dos modelos en comparación coas medias decae a medida que o modelo avanza no tempo, pero decaen a un ritmo máis lento que aqueles modelos adestrados con vectores de entrada con unha observación. Obsérvase claramente que o <span class="math inline">\(R^2\)</span> destes modelos presenta unha maior variación que o <span class="math inline">\(R^2\)</span> dos modelos analizados anteriormente, observando como esta variación diminúe para aquelas predicións posteriores a 2015. Estes modelos, coma os primeiros, presentaron un <span class="math inline">\(R^2\)</span> negativo na maioría dos períodos. Ademais, coma nos casos anteriores, tamén se observa un pico no <span class="math inline">\(MSE\)</span> do modelo a principios de 2020.</p>
</section>
</section>
<section id="sec-cc" class="level2">
<h2 class="anchored" data-anchor-id="sec-cc">2.6.2 Composición de carteiras</h2>
<p>Pódese atopar unha explicación máis detallada do código utilizado durante o procedemento descrito nesta subsección en Anexo 4 - <a href="./Annex4.html#sec-A-cc">Composición de carteiras</a>.</p>
<p>Neste subepígrafe descríbense os resultados obtidos tras aplicar a programación cuadrática para determinar a composición da carteira. Esta, así como as previsións, fíxose período a período co obxectivo de emular unha situación real na que as técnicas se aplicasen no seu conxunto. Polo tanto, a presente análise céntrase no comportamento observado ao utilizar os distintos modelos e na comparación destes resultados cos obtidos co uso de medias.</p>
<p>Como se pode ver en <a href="Annex2.html#fig-pf_evo_oo" class="quarto-xref">Figura&nbsp;<span>11</span></a>, as carteiras feitas a partir das predicións obtidas polos modelos de redes neuronais que tiñan unha observación xeralmente obtiveron mellores resultados que as carteiras feitas a partir das predicións usando a media. Obsérvase que ambos grupos de carteiras presentaron unha rendibilidade inferior á do índice, IBEX, no período comprendido entre 2009 e 2016.</p>
<p>Ao realizar a análise do comportamento dos rendementos obtidos polos modelos con dúas observacións de entrada, <a href="Annex2.html#fig-pf_evo_twoo" class="quarto-xref">Figura&nbsp;<span>12</span></a>, obsérvase: o comportamento dos rendementos obtidos polos distintos modelos varía menos que os analizados anteriormente; Neste caso e contrariamente ao caso anterior, os rendementos seguen sendo similares no período comprendido entre 2009 e 2016; e aínda que o resultado final dista moito do resultado obtido polas medias, é inferior ao obtido polos modelos anteriores, sendo este último debido a que a avaliación dos modelos neste caso comeza nun período anterior aos de modelos analizados anteriormente.</p>
<p>Observando os resultados obtidos polos últimos modelos, <a href="Annex2.html#fig-pf_evo_threeo" class="quarto-xref">Figura&nbsp;<span>13</span></a>, obsérvase: unha distribución de rendementos superior aos adestrados con dúas observacións pero inferior aos adestrados cunha observación; obsérvase que os rendementos comezan a superar os do índice despois de 2013 en lugar de 2016 como en anos anteriores; e tamén se observa que os rendementos dos modelos de ANN son superiores aos das medias e tamén constitúen os máximos rendementos obtidos entre as distintas estruturas dos modelos de ANN.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Glen23" class="csl-entry" role="listitem">
Glen, S. 2023. <span>“Mean Squared Error: Definition and Example.”</span> 2023. <a href="https://www.statisticshowto.com/probability-and-statistics/statistics-definitions/mean-squared-error/">https://www.statisticshowto.com/probability-and-statistics/statistics-definitions/mean-squared-error/</a>.
</div>
<div id="ref-NBERw25398" class="csl-entry" role="listitem">
Gu, Shihao, Bryan Kelly, and Dacheng Xiu. 2018. <span>“Empirical Asset Pricing via Machine Learning.”</span> Working Paper 25398. Working Paper Series. National Bureau of Economic Research. <a href="https://doi.org/10.3386/w25398">https://doi.org/10.3386/w25398</a>.
</div>
<div id="ref-Nandakumar20" class="csl-entry" role="listitem">
Nandakumar, S. 2020. <span>“How Can r-Squared Be Negative When the Correlation Between Prediction and Truth Is Positive?”</span> 2020. <a href="https://stackoverflow.com/a/63311778/12660035">https://stackoverflow.com/a/63311778/12660035</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script type="text/javascript">

  const elementWithauthor = document.querySelector('.quarto-title-meta-author');
  
  if(elementWithauthor){
    
    //Ad more description in title banner
    let TFMtitle = document.getElementById('title-block-header');
    let TFMtitlefc = TFMtitle.firstElementChild;
    let TFMtitlefcfc = TFMtitlefc.firstElementChild;
    const sublead = document.createElement('p');
      sublead.className = 'subtitle lead';
      sublead.id = 'sublead';
      sublead.textContent = "Máster Universitario en Banca e Finanzas Curso académico 2022/2023";
    const sub_sublead = document.createElement('p');
      sub_sublead.className = 'subtitle lead';
      sub_sublead.id='sub_sublead';
      sub_sublead.textContent = "Traballo Fin de Máster presentado na Facultade de Economía e Empresa da Universidade da Coruña para a obtención do Máster Universitario en Banca e Finanzas";
    const udclogo = document.createElement('p');
      udclogo.innerHTML='<img src="../udclogo.png" style="width: 25%;">'
    TFMtitlefcfc.appendChild(sublead);
    TFMtitlefcfc.appendChild(sub_sublead);
    TFMtitlefcfc.appendChild(udclogo);
    
    //Fix authoring info
    const authorsElement = document.querySelector('.quarto-title-meta-heading');
    authorsElement.textContent = "AUTOR";
    const authorsInfo = authorsElement.parentElement;
    const tutorname = authorsElement.cloneNode(true);
    tutorname.textContent = "TITOR";
    tutorname.style.marginTop = '0';
    const tutorafili = tutorname.cloneNode(true);
    tutorafili.textContent = "";
    authorsInfo.insertBefore(tutorafili, authorsInfo.children[4]);
    authorsInfo.insertBefore(tutorname, authorsInfo.children[4]);
    
  }else{
    let TFMtitle = document.getElementById('title-block-header');
    let TFMtitlefc = TFMtitle.firstElementChild;
    let TFMtitlefcfc = TFMtitlefc.firstElementChild;
    const sub_sublead = document.createElement('p');
      sub_sublead.className = 'subtitle lead';
      sub_sublead.id='sub_sublead';
      sub_sublead.textContent = 'Aplicación das redes neuronais artificiais e da programación cuadrática na xestión de carteiras';
    TFMtitlefcfc.appendChild(sub_sublead);
    
    
    
  }
</script>

<script>

// Read the HTML content from a file
async function readHTMLFile(filePath) {
  try {
    const response = await fetch(filePath);
    const htmlContent = await response.text();
    return htmlContent;
  } catch (error) {
    console.error('Error reading HTML file:', error);
    return null;
  }
}

// Main function to process the HTML file
async function processHtmlFile(filePath, patternToMatch, patternToReplace, replacement) {
  const htmlContent = await readHTMLFile(filePath);
  const idsToSearch = [];

  if (htmlContent) {
    const parser = new DOMParser();
    const doc = parser.parseFromString(htmlContent, 'text/html');

    const elementsWithMatchingIds = Array.from(doc.querySelectorAll('[id^="' + patternToMatch + '"]'));
    elementsWithMatchingIds.forEach(element => {
      const id = element.getAttribute('id');
      idsToSearch.push(id);
    });
  }

  const anchorElements = Array.from(document.querySelectorAll('a'));

  anchorElements.forEach(anchorElement => {
    const href = anchorElement.getAttribute('href');
    if (idsToSearch.some(id => href && href.endsWith(id))) {
      anchorElement.innerHTML = anchorElement.innerHTML.replace(patternToReplace, replacement);
    }
  });
}


const filePath = 'Annex2.html'; 
const patternToMatch = 'fig-'; 
const patternToReplace = 'Figura&nbsp;';
const replacement = 'Gráfico ';

processHtmlFile(filePath, patternToMatch, patternToReplace, replacement);
  
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiouse!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiouse!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./MandT.html" class="pagination-link" aria-label="2.5 Modelado e formación">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">2.5 Modelado e formación</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./conclusions.html" class="pagination-link" aria-label="3 Conclusións">
        <span class="nav-page-text">3 Conclusións</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Traballo Fin de Máster presentado en <a href="https://fee.udc.es/"><img src="../feelogo.png" class="img-fluid" alt="FEE" width="65"></a> <a href="https://www.udc.es/"><img src="../udclogo.png" class="img-fluid" alt="UDC" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 David Díaz Rodríguez
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/davidrsch/TFM/edit/master/gale/Results.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta páxina</a></li></ul></div></div>
    <div class="nav-footer-right">
<p><a href="https://www.linkedin.com/in/david-d-6257951b8/"><img src="../sm/linkedin.png" width="20px" fig-alt="Linkeding profile"></a> <a href="https://github.com/davidrsch/TFM/"><img src="../sm/github.png" width="20px" fig-alt="Github repository"></a> <a href="https://www.researchgate.net/profile/David-Diaz-Rodriguez"><img src="../sm/Researchgate.png" width="20px" fig-alt="ResearchGate profile"></a> <a href="https://orcid.org/0000-0002-0927-9795"><img src="../sm/orcid.png" width="20px" fig-alt="ORCid profile"></a></p>
</div>
  </div>
</footer>




</body></html>